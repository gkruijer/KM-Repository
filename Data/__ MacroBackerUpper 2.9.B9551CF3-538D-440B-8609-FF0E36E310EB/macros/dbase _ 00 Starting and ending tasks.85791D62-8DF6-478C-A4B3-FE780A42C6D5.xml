<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
	<dict>
		<key>Actions</key>
		<array>
			<dict>
				<key>ActionColor</key>
				<string>Teal</string>
				<key>ActionUID</key>
				<integer>15603462</integer>
				<key>MacroActionType</key>
				<string>Comment</string>
				<key>StyledText</key>
				<data>
							cnRmZAAAAAADAAAAAgAA
							AAcAAABUWFQucnRmAQAA
							AC48AgAAKwAAAAEAAAA0
							AgAAe1xydGYxXGFuc2lc
							YW5zaWNwZzEyNTJcY29j
							b2FydGYyNzA5Clxjb2Nv
							YXRleHRzY2FsaW5nMFxj
							b2NvYXBsYXRmb3JtMHtc
							Zm9udHRibFxmMFxmc3dp
							c3NcZmNoYXJzZXQwIEhl
							bHZldGljYS1Cb2xkO1xm
							MVxmc3dpc3NcZmNoYXJz
							ZXQwIEhlbHZldGljYTt9
							CntcY29sb3J0Ymw7XHJl
							ZDI1NVxncmVlbjI1NVxi
							bHVlMjU1O1xyZWQwXGdy
							ZWVuMFxibHVlMDt9Cntc
							KlxleHBhbmRlZGNvbG9y
							dGJsOztcY3NzcmdiXGMw
							XGMwXGMwXGM4NDcwNlxj
							bmFtZSBjb250cm9sVGV4
							dENvbG9yO30KXHBhcmRc
							dHg1NjBcdHgxMTIwXHR4
							MTY4MFx0eDIyNDBcdHgy
							ODAwXHR4MzM2MFx0eDM5
							MjBcdHg0NDgwXHR4NTA0
							MFx0eDU2MDBcdHg2MTYw
							XHR4NjcyMFxwYXJkaXJu
							YXR1cmFsXHBhcnRpZ2h0
							ZW5mYWN0b3IwCgpcZjBc
							YlxmczI2IFxjZjIgUHVy
							cG9zZQpcZjFcYjAgXAog
							IFwnOTUgQXQgc3RhcnQg
							b2YgYmFja3VwLCBhZGRz
							ICJuZXcgYmFja3VwIiB0
							YWJsZXMgdG8gZGF0YWJh
							c2UuIEF0IGVuZCBvZiBi
							YWNrdXAsIG1vdmVzICJu
							ZXcgYmFja3VwIiB0YWJs
							ZXMgdG8gIm9sZCBiYWNr
							dXAiIHRhYmxlcy59AQAA
							ACMAAAABAAAABwAAAFRY
							VC5ydGYQAAAAAKRGZbYB
							AAAAAAAAAAAAAA==
							</data>
				<key>Title</key>
				<string>dbase: Starting and ending tasks</string>
			</dict>
			<dict>
				<key>ActionName</key>
				<string>Database-related tasks at start and end of backup</string>
				<key>ActionUID</key>
				<integer>15603463</integer>
				<key>CaseEntries</key>
				<array>
					<dict>
						<key>Actions</key>
						<array>
							<dict>
								<key>ActionColor</key>
								<string>Yellow</string>
								<key>ActionName</key>
								<string>Database prep at start of backup process</string>
								<key>ActionUID</key>
								<integer>15603464</integer>
								<key>IsDisclosed</key>
								<false/>
								<key>MacroActionType</key>
								<string>Comment</string>
								<key>StyledText</key>
								<data>
								cnRmZAAAAAAD
								AAAAAgAAAAcA
								AABUWFQucnRm
								AQAAAC5wAQAA
								KwAAAAEAAABo
								AQAAe1xydGYx
								XGFuc2lcYW5z
								aWNwZzEyNTJc
								Y29jb2FydGYx
								NjcxXGNvY29h
								c3VicnRmNjAw
								CntcZm9udHRi
								bFxmMFxmc3dp
								c3NcZmNoYXJz
								ZXQwIEhlbHZl
								dGljYTt9Cntc
								Y29sb3J0Ymw7
								XHJlZDI1NVxn
								cmVlbjI1NVxi
								bHVlMjU1O1xy
								ZWQwXGdyZWVu
								MFxibHVlMDt9
								CntcKlxleHBh
								bmRlZGNvbG9y
								dGJsOztcY3Nz
								cmdiXGMwXGMw
								XGMwXGM4NDcw
								NlxjbmFtZSBj
								b250cm9sVGV4
								dENvbG9yO30K
								XHBhcmRcdHg1
								NjBcdHgxMTIw
								XHR4MTY4MFx0
								eDIyNDBcdHgy
								ODAwXHR4MzM2
								MFx0eDM5MjBc
								dHg0NDgwXHR4
								NTA0MFx0eDU2
								MDBcdHg2MTYw
								XHR4NjcyMFxw
								YXJkaXJuYXR1
								cmFsXHBhcnRp
								Z2h0ZW5mYWN0
								b3IwCgpcZjBc
								ZnMyNiBcY2Yy
								IC59AQAAACMA
								AAABAAAABwAA
								AFRYVC5ydGYQ
								AAAAoGXMYbYB
								AAAAAAAAAAAA
								AA==
											</data>
								<key>Title</key>
								<string>Generic comment with Helvetica text</string>
							</dict>
							<dict>
								<key>ActionName</key>
								<string>Get count of folders in backup folder</string>
								<key>ActionUID</key>
								<integer>15603465</integer>
								<key>DisplayKind</key>
								<string>Variable</string>
								<key>HonourFailureSettings</key>
								<true/>
								<key>IncludeStdErr</key>
								<false/>
								<key>IncludedVariables</key>
								<array>
									<string>9999</string>
								</array>
								<key>IsDisclosed</key>
								<false/>
								<key>MacroActionType</key>
								<string>ExecuteShellScript</string>
								<key>Path</key>
								<string></string>
								<key>Source</key>
								<string>Nothing</string>
								<key>Text</key>
								<string>find "$KMVAR_rg_MBU_BackupLoc" -name "2*" -maxdepth 1 | wc -l</string>
								<key>TimeOutAbortsMacro</key>
								<true/>
								<key>TrimResults</key>
								<true/>
								<key>TrimResultsNew</key>
								<true/>
								<key>UseText</key>
								<true/>
								<key>Variable</key>
								<string>local_PreBackupCount</string>
							</dict>
							<dict>
								<key>ActionName</key>
								<string>Check database status, recreate if necessary</string>
								<key>ActionUID</key>
								<integer>15603466</integer>
								<key>Actions</key>
								<array>
									<dict>
										<key>ActionName</key>
										<string>If first backup, there shouldn't be a database, so delete it if found</string>
										<key>ActionUID</key>
										<integer>15603467</integer>
										<key>CaseEntries</key>
										<array>
											<dict>
												<key>Actions</key>
												<array>
													<dict>
														<key>ActionName</key>
														<string>Delete database if it's there, as it can't be correct</string>
														<key>ActionUID</key>
														<integer>15603468</integer>
														<key>DisplayKind</key>
														<string>None</string>
														<key>HonourFailureSettings</key>
														<true/>
														<key>IncludeStdErr</key>
														<false/>
														<key>IncludedVariables</key>
														<array>
															<string>9999</string>
														</array>
														<key>IsDisclosed</key>
														<false/>
														<key>MacroActionType</key>
														<string>ExecuteShellScript</string>
														<key>Path</key>
														<string></string>
														<key>Source</key>
														<string>Nothing</string>
														<key>Text</key>
														<string>if [ -d "$KMVAR_instance_theDatabasePath" ]; then rm "$KMVAR_instance_theDatabasePath"; fi </string>
														<key>TimeOutAbortsMacro</key>
														<true/>
														<key>TrimResults</key>
														<true/>
														<key>TrimResultsNew</key>
														<true/>
														<key>UseText</key>
														<true/>
													</dict>
												</array>
												<key>ConditionType</key>
												<string>Is</string>
												<key>TestValue</key>
												<string>0</string>
											</dict>
											<dict>
												<key>Actions</key>
												<array>
													<dict>
														<key>ActionColor</key>
														<string>Yellow</string>
														<key>ActionName</key>
														<string>With at least one backup, there should be a database.</string>
														<key>ActionUID</key>
														<integer>15603469</integer>
														<key>IsDisclosed</key>
														<false/>
														<key>MacroActionType</key>
														<string>Comment</string>
														<key>StyledText</key>
														<data>
								cnRmZAAAAAAD
								AAAAAgAAAAcA
								AABUWFQucnRm
								AQAAAC5wAQAA
								KwAAAAEAAABo
								AQAAe1xydGYx
								XGFuc2lcYW5z
								aWNwZzEyNTJc
								Y29jb2FydGYx
								NjcxXGNvY29h
								c3VicnRmNjAw
								CntcZm9udHRi
								bFxmMFxmc3dp
								c3NcZmNoYXJz
								ZXQwIEhlbHZl
								dGljYTt9Cntc
								Y29sb3J0Ymw7
								XHJlZDI1NVxn
								cmVlbjI1NVxi
								bHVlMjU1O1xy
								ZWQwXGdyZWVu
								MFxibHVlMDt9
								CntcKlxleHBh
								bmRlZGNvbG9y
								dGJsOztcY3Nz
								cmdiXGMwXGMw
								XGMwXGM4NDcw
								NlxjbmFtZSBj
								b250cm9sVGV4
								dENvbG9yO30K
								XHBhcmRcdHg1
								NjBcdHgxMTIw
								XHR4MTY4MFx0
								eDIyNDBcdHgy
								ODAwXHR4MzM2
								MFx0eDM5MjBc
								dHg0NDgwXHR4
								NTA0MFx0eDU2
								MDBcdHg2MTYw
								XHR4NjcyMFxw
								YXJkaXJuYXR1
								cmFsXHBhcnRp
								Z2h0ZW5mYWN0
								b3IwCgpcZjBc
								ZnMyNiBcY2Yy
								IC59AQAAACMA
								AAABAAAABwAA
								AFRYVC5ydGYQ
								AAAAoGXMYbYB
								AAAAAAAAAAAA
								AA==
																	</data>
														<key>Title</key>
														<string></string>
													</dict>
													<dict>
														<key>ActionName</key>
														<string>Check if database present, recreate old data if not</string>
														<key>ActionUID</key>
														<integer>15603470</integer>
														<key>DisplayKind</key>
														<string>Variable</string>
														<key>HonourFailureSettings</key>
														<true/>
														<key>IncludeStdErr</key>
														<false/>
														<key>IncludedVariables</key>
														<array>
															<string>9999</string>
														</array>
														<key>IsDisclosed</key>
														<false/>
														<key>MacroActionType</key>
														<string>ExecuteShellScript</string>
														<key>Path</key>
														<string></string>
														<key>Source</key>
														<string>Nothing</string>
														<key>Text</key>
														<string>if [ ! -f "$KMVAR_instance_theDatabasePath" ]; then echo "dbase missing"; fi</string>
														<key>TimeOutAbortsMacro</key>
														<true/>
														<key>TrimResults</key>
														<true/>
														<key>TrimResultsNew</key>
														<true/>
														<key>UseText</key>
														<true/>
														<key>Variable</key>
														<string>local_DbaseCheck</string>
													</dict>
													<dict>
														<key>ActionName</key>
														<string>Do this if database is missing</string>
														<key>ActionUID</key>
														<integer>15603471</integer>
														<key>CaseEntries</key>
														<array>
															<dict>
																<key>Actions</key>
																<array>
																	<dict>
																		<key>ActionColor</key>
																		<string>Purple</string>
																		<key>ActionName</key>
																		<string>Recreate missing 'old' macros database table</string>
																		<key>ActionUID</key>
																		<integer>15603472</integer>
																		<key>IsDisclosed</key>
																		<false/>
																		<key>MacroActionType</key>
																		<string>ExecuteSubroutine</string>
																		<key>MacroUID</key>
																		<string>52720FE4-96DD-41E0-9ED4-9936AA7292A0</string>
																		<key>Parameters</key>
																		<array>
																			<string>OldMacros</string>
																		</array>
																		<key>ResultVariable</key>
																		<string></string>
																		<key>TimeOutAbortsMacro</key>
																		<true/>
																	</dict>
																	<dict>
																		<key>ActionUID</key>
																		<integer>15603473</integer>
																		<key>IsDisclosed</key>
																		<false/>
																		<key>MacroActionType</key>
																		<string>Notification</string>
																		<key>SoundName</key>
																		<string></string>
																		<key>Subtitle</key>
																		<string>has been successfully rebuilt</string>
																		<key>Text</key>
																		<string></string>
																		<key>Title</key>
																		<string>The database couldn't be found; it</string>
																	</dict>
																</array>
																<key>ConditionType</key>
																<string>Is</string>
																<key>TestValue</key>
																<string>dbase missing</string>
															</dict>
														</array>
														<key>MacroActionType</key>
														<string>Switch</string>
														<key>Source</key>
														<string>Variable</string>
														<key>Variable</key>
														<string>local_DbaseCheck</string>
													</dict>
												</array>
												<key>ConditionType</key>
												<string>GreaterThanOrEqual</string>
												<key>TestValue</key>
												<string>1</string>
											</dict>
										</array>
										<key>MacroActionType</key>
										<string>Switch</string>
										<key>Source</key>
										<string>Variable</string>
										<key>Variable</key>
										<string>local_PreBackupCount</string>
									</dict>
									<dict>
										<key>ActionColor</key>
										<string>Magenta</string>
										<key>ActionUID</key>
										<integer>15603474</integer>
										<key>Asynchronously</key>
										<false/>
										<key>IsDisclosed</key>
										<false/>
										<key>MacroActionType</key>
										<string>ExecuteMacro</string>
										<key>MacroUID</key>
										<string>9058F81A-48CB-4613-A700-1460E4984301</string>
										<key>Parameter</key>
										<string>Recreate the 'old' macros database if necessary</string>
										<key>TimeOutAbortsMacro</key>
										<true/>
										<key>UseParameter</key>
										<true/>
									</dict>
									<dict>
										<key>ActionColor</key>
										<string>Purple</string>
										<key>ActionName</key>
										<string>Create 'new' macros table on each run</string>
										<key>ActionUID</key>
										<integer>15603475</integer>
										<key>IsDisclosed</key>
										<false/>
										<key>MacroActionType</key>
										<string>ExecuteSubroutine</string>
										<key>MacroUID</key>
										<string>52720FE4-96DD-41E0-9ED4-9936AA7292A0</string>
										<key>Parameters</key>
										<array>
											<string>NewMacros</string>
										</array>
										<key>ResultVariable</key>
										<string></string>
										<key>TimeOutAbortsMacro</key>
										<true/>
									</dict>
								</array>
								<key>IsDisclosed</key>
								<false/>
								<key>MacroActionType</key>
								<string>Group</string>
								<key>TimeOutAbortsMacro</key>
								<true/>
							</dict>
							<dict>
								<key>ActionColor</key>
								<string>Magenta</string>
								<key>ActionUID</key>
								<integer>15603476</integer>
								<key>Asynchronously</key>
								<false/>
								<key>IsDisclosed</key>
								<false/>
								<key>MacroActionType</key>
								<string>ExecuteMacro</string>
								<key>MacroUID</key>
								<string>9058F81A-48CB-4613-A700-1460E4984301</string>
								<key>Parameter</key>
								<string>Prepare the 'new' macros database</string>
								<key>TimeOutAbortsMacro</key>
								<true/>
								<key>UseParameter</key>
								<true/>
							</dict>
						</array>
						<key>ConditionType</key>
						<string>Is</string>
						<key>TestValue</key>
						<string>beginDB</string>
					</dict>
					<dict>
						<key>Actions</key>
						<array>
							<dict>
								<key>ActionColor</key>
								<string>Yellow</string>
								<key>ActionName</key>
								<string>Database prep for next backup run</string>
								<key>ActionUID</key>
								<integer>15603477</integer>
								<key>IsDisclosed</key>
								<false/>
								<key>MacroActionType</key>
								<string>Comment</string>
								<key>StyledText</key>
								<data>
								cnRmZAAAAAAD
								AAAAAgAAAAcA
								AABUWFQucnRm
								AQAAAC5wAQAA
								KwAAAAEAAABo
								AQAAe1xydGYx
								XGFuc2lcYW5z
								aWNwZzEyNTJc
								Y29jb2FydGYx
								NjcxXGNvY29h
								c3VicnRmNjAw
								CntcZm9udHRi
								bFxmMFxmc3dp
								c3NcZmNoYXJz
								ZXQwIEhlbHZl
								dGljYTt9Cntc
								Y29sb3J0Ymw7
								XHJlZDI1NVxn
								cmVlbjI1NVxi
								bHVlMjU1O1xy
								ZWQwXGdyZWVu
								MFxibHVlMDt9
								CntcKlxleHBh
								bmRlZGNvbG9y
								dGJsOztcY3Nz
								cmdiXGMwXGMw
								XGMwXGM4NDcw
								NlxjbmFtZSBj
								b250cm9sVGV4
								dENvbG9yO30K
								XHBhcmRcdHg1
								NjBcdHgxMTIw
								XHR4MTY4MFx0
								eDIyNDBcdHgy
								ODAwXHR4MzM2
								MFx0eDM5MjBc
								dHg0NDgwXHR4
								NTA0MFx0eDU2
								MDBcdHg2MTYw
								XHR4NjcyMFxw
								YXJkaXJuYXR1
								cmFsXHBhcnRp
								Z2h0ZW5mYWN0
								b3IwCgpcZjBc
								ZnMyNiBcY2Yy
								IC59AQAAACMA
								AAABAAAABwAA
								AFRYVC5ydGYQ
								AAAAoGXMYbYB
								AAAAAAAAAAAA
								AA==
											</data>
								<key>Title</key>
								<string>Generic comment with Helvetica text</string>
							</dict>
							<dict>
								<key>ActionName</key>
								<string>Rename the 'new' tables to become the 'old' tables</string>
								<key>ActionUID</key>
								<integer>15603478</integer>
								<key>Actions</key>
								<array>
									<dict>
										<key>ActionName</key>
										<string>The SQL commands</string>
										<key>ActionUID</key>
										<integer>15603479</integer>
										<key>MacroActionType</key>
										<string>SetVariableToText</string>
										<key>Text</key>
										<string>DROP TABLE IF EXISTS macros_old;
ALTER TABLE macros_new RENAME TO macros_old;

DROP TABLE IF EXISTS groups_old;
ALTER TABLE groups_new RENAME TO groups_old</string>
										<key>Variable</key>
										<string>instanceTheData</string>
									</dict>
									<dict>
										<key>ActionName</key>
										<string>Import the SQL commands</string>
										<key>ActionUID</key>
										<integer>15603480</integer>
										<key>DisplayKind</key>
										<string>None</string>
										<key>HonourFailureSettings</key>
										<true/>
										<key>IncludeStdErr</key>
										<false/>
										<key>IncludedVariables</key>
										<array>
											<string>9999</string>
										</array>
										<key>MacroActionType</key>
										<string>ExecuteShellScript</string>
										<key>Path</key>
										<string></string>
										<key>Source</key>
										<string>Nothing</string>
										<key>Text</key>
										<string>sqlite3 "$KMVAR_instance_theDatabasePath" &lt;&lt; EOF
$KMVAR_instanceTheData
EOF</string>
										<key>TimeOutAbortsMacro</key>
										<true/>
										<key>TrimResults</key>
										<true/>
										<key>TrimResultsNew</key>
										<true/>
										<key>UseText</key>
										<true/>
									</dict>
								</array>
								<key>IsDisclosed</key>
								<false/>
								<key>MacroActionType</key>
								<string>Group</string>
								<key>TimeOutAbortsMacro</key>
								<true/>
							</dict>
							<dict>
								<key>ActionName</key>
								<string>Remove the old indices</string>
								<key>ActionUID</key>
								<integer>15603481</integer>
								<key>Actions</key>
								<array>
									<dict>
										<key>ActionName</key>
										<string>The SQL commands</string>
										<key>ActionUID</key>
										<integer>15603482</integer>
										<key>IsDisclosed</key>
										<false/>
										<key>MacroActionType</key>
										<string>SetVariableToText</string>
										<key>Text</key>
										<string>DROP INDEX idx_groups_new;
DROP INDEX idx_macros_new;</string>
										<key>Variable</key>
										<string>instanceTheData</string>
									</dict>
									<dict>
										<key>ActionName</key>
										<string>Import the SQL commands</string>
										<key>ActionUID</key>
										<integer>15603483</integer>
										<key>DisplayKind</key>
										<string>None</string>
										<key>HonourFailureSettings</key>
										<true/>
										<key>IncludeStdErr</key>
										<false/>
										<key>IncludedVariables</key>
										<array>
											<string>9999</string>
										</array>
										<key>MacroActionType</key>
										<string>ExecuteShellScript</string>
										<key>Path</key>
										<string></string>
										<key>Source</key>
										<string>Nothing</string>
										<key>Text</key>
										<string>sqlite3 "$KMVAR_instance_theDatabasePath" &lt;&lt; EOF
$KMVAR_instanceTheData
EOF</string>
										<key>TimeOutAbortsMacro</key>
										<true/>
										<key>TrimResults</key>
										<true/>
										<key>TrimResultsNew</key>
										<true/>
										<key>UseText</key>
										<true/>
									</dict>
								</array>
								<key>IsDisclosed</key>
								<false/>
								<key>MacroActionType</key>
								<string>Group</string>
								<key>TimeOutAbortsMacro</key>
								<true/>
							</dict>
							<dict>
								<key>ActionName</key>
								<string>Create indices</string>
								<key>ActionUID</key>
								<integer>15603484</integer>
								<key>Actions</key>
								<array>
									<dict>
										<key>ActionName</key>
										<string>The SQL commands</string>
										<key>ActionUID</key>
										<integer>15603485</integer>
										<key>MacroActionType</key>
										<string>SetVariableToText</string>
										<key>Text</key>
										<string>CREATE INDEX IF NOT EXISTS idx_groups_old
ON groups_old (Group_Name);
CREATE INDEX IF NOT EXISTS idx_macros_old
ON macros_old (Macro_Name, Group_ID);
</string>
										<key>Variable</key>
										<string>instanceTheData</string>
									</dict>
									<dict>
										<key>ActionName</key>
										<string>Import the SQL commands</string>
										<key>ActionUID</key>
										<integer>15603486</integer>
										<key>DisplayKind</key>
										<string>None</string>
										<key>HonourFailureSettings</key>
										<true/>
										<key>IncludeStdErr</key>
										<false/>
										<key>IncludedVariables</key>
										<array>
											<string>9999</string>
										</array>
										<key>MacroActionType</key>
										<string>ExecuteShellScript</string>
										<key>Path</key>
										<string></string>
										<key>Source</key>
										<string>Nothing</string>
										<key>Text</key>
										<string>sqlite3 "$KMVAR_instance_theDatabasePath" &lt;&lt; EOF
$KMVAR_instanceTheData
EOF</string>
										<key>TimeOutAbortsMacro</key>
										<true/>
										<key>TrimResults</key>
										<true/>
										<key>TrimResultsNew</key>
										<true/>
										<key>UseText</key>
										<true/>
									</dict>
								</array>
								<key>IsDisclosed</key>
								<false/>
								<key>MacroActionType</key>
								<string>Group</string>
								<key>TimeOutAbortsMacro</key>
								<true/>
							</dict>
						</array>
						<key>ConditionType</key>
						<string>Is</string>
						<key>TestValue</key>
						<string>endDB</string>
					</dict>
				</array>
				<key>MacroActionType</key>
				<string>Switch</string>
				<key>Source</key>
				<string>Text</string>
				<key>Text</key>
				<string>%TriggerValue%</string>
			</dict>
		</array>
		<key>CreationDate</key>
		<real>725560211.02410305</real>
		<key>CustomIconData</key>
		<string>KMEC=Square=KMCOLOR:255,255,255,0==86=0=0=0=KMCOLOR:0,0,0,255</string>
		<key>ModificationDate</key>
		<real>723215256.73932099</real>
		<key>Name</key>
		<string>dbase | 00 Starting and ending tasks</string>
		<key>Triggers</key>
		<array/>
		<key>UID</key>
		<string>85791D62-8DF6-478C-A4B3-FE780A42C6D5</string>
	</dict>
</array>
</plist>
