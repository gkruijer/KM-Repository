<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
	<dict>
		<key>Actions</key>
		<array>
			<dict>
				<key>ActionColor</key>
				<string>Teal</string>
				<key>ActionUID</key>
				<integer>15604234</integer>
				<key>MacroActionType</key>
				<string>Comment</string>
				<key>StyledText</key>
				<data>
							cnRmZAAAAAADAAAAAgAA
							AAcAAABUWFQucnRmAQAA
							AC40AgAAKwAAAAEAAAAs
							AgAAe1xydGYxXGFuc2lc
							YW5zaWNwZzEyNTJcY29j
							b2FydGYyNzA5Clxjb2Nv
							YXRleHRzY2FsaW5nMFxj
							b2NvYXBsYXRmb3JtMHtc
							Zm9udHRibFxmMFxmc3dp
							c3NcZmNoYXJzZXQwIEhl
							bHZldGljYS1Cb2xkO1xm
							MVxmc3dpc3NcZmNoYXJz
							ZXQwIEhlbHZldGljYTt9
							CntcY29sb3J0Ymw7XHJl
							ZDI1NVxncmVlbjI1NVxi
							bHVlMjU1O1xyZWQwXGdy
							ZWVuMFxibHVlMDt9Cntc
							KlxleHBhbmRlZGNvbG9y
							dGJsOztcY3NzcmdiXGMw
							XGMwXGMwXGM4NDcwNlxj
							bmFtZSBjb250cm9sVGV4
							dENvbG9yO30KXHBhcmRc
							dHg1NjBcdHgxMTIwXHR4
							MTY4MFx0eDIyNDBcdHgy
							ODAwXHR4MzM2MFx0eDM5
							MjBcdHg0NDgwXHR4NTA0
							MFx0eDU2MDBcdHg2MTYw
							XHR4NjcyMFxwYXJkaXJu
							YXR1cmFsXHBhcnRpZ2h0
							ZW5mYWN0b3IwCgpcZjBc
							YlxmczI2IFxjZjIgUHVy
							cG9zZQpcZjFcYjAgXAog
							IFwnOTUgSWYgdGhlIHVz
							ZXIgaGFzIHNldCBhIGxp
							bWl0IG9uIHRoZSBudW1i
							ZXIgb2YgYmFja3Vwcywg
							dGhpcyByb3V0aW5lIGRl
							dGVybWluZXMgd2hpY2gg
							b25lcyB0byByZW1vdmUs
							IGFuZCByZW1vdmVzIHRo
							ZW0ufQEAAAAjAAAAAQAA
							AAcAAABUWFQucnRmEAAA
							AB9sI2W2AQAAAAAAAAAA
							AAA=
							</data>
				<key>Title</key>
				<string>tasks: Trim backups</string>
			</dict>
			<dict>
				<key>ActionName</key>
				<string>Calculate the number of backups to be removed</string>
				<key>ActionUID</key>
				<integer>15604235</integer>
				<key>IsDisclosed</key>
				<false/>
				<key>MacroActionType</key>
				<string>SetVariableToCalculation</string>
				<key>Text</key>
				<string>instance_BackupCount-instance_BackupQty</string>
				<key>UseFormat</key>
				<false/>
				<key>Variable</key>
				<string>instance_BackupFoldersRemoved</string>
			</dict>
			<dict>
				<key>ActionName</key>
				<string>Calculate the value needed in the 'tail' command</string>
				<key>ActionUID</key>
				<integer>15604236</integer>
				<key>IsDisclosed</key>
				<false/>
				<key>MacroActionType</key>
				<string>SetVariableToCalculation</string>
				<key>Text</key>
				<string>instance_BackupQty+1</string>
				<key>UseFormat</key>
				<false/>
				<key>Variable</key>
				<string>local_LinesToTail</string>
			</dict>
			<dict>
				<key>ActionName</key>
				<string>The actual list of folders to delete</string>
				<key>ActionUID</key>
				<integer>15604237</integer>
				<key>DisplayKind</key>
				<string>Variable</string>
				<key>HonourFailureSettings</key>
				<true/>
				<key>IncludeStdErr</key>
				<false/>
				<key>IncludedVariables</key>
				<array>
					<string>9999</string>
				</array>
				<key>IsDisclosed</key>
				<false/>
				<key>MacroActionType</key>
				<string>ExecuteShellScript</string>
				<key>Path</key>
				<string></string>
				<key>Source</key>
				<string>Nothing</string>
				<key>Text</key>
				<string>find "$KMVAR_rg_MBU_BackupLoc" -name "2*" -maxdepth 1 | sort -r | tail -n +"$KMVAR_local_LinesToTail"</string>
				<key>TimeOutAbortsMacro</key>
				<true/>
				<key>TrimResults</key>
				<true/>
				<key>TrimResultsNew</key>
				<true/>
				<key>UseText</key>
				<true/>
				<key>Variable</key>
				<string>local_FoldersToDelete</string>
			</dict>
			<dict>
				<key>ActionName</key>
				<string>Move the folders to the trash one by oneâ€”seems safest!</string>
				<key>ActionUID</key>
				<integer>15604238</integer>
				<key>Actions</key>
				<array>
					<dict>
						<key>ActionUID</key>
						<integer>15604239</integer>
						<key>Destination</key>
						<string></string>
						<key>MacroActionType</key>
						<string>File</string>
						<key>Operation</key>
						<string>Trash</string>
						<key>Source</key>
						<string>%Variable%local_TheFolder%</string>
					</dict>
				</array>
				<key>Collections</key>
				<dict>
					<key>CollectionList</key>
					<array>
						<dict>
							<key>CollectionType</key>
							<string>LinesIn</string>
							<key>IncludeBlankLines</key>
							<false/>
							<key>Source</key>
							<string>Variable</string>
							<key>Variable</key>
							<string>local_FoldersToDelete</string>
						</dict>
					</array>
				</dict>
				<key>IsDisclosed</key>
				<false/>
				<key>MacroActionType</key>
				<string>For</string>
				<key>TimeOutAbortsMacro</key>
				<true/>
				<key>Variable</key>
				<string>local_TheFolder</string>
			</dict>
			<dict>
				<key>ActionName</key>
				<string>Add note explaining backup(s) were removed</string>
				<key>ActionUID</key>
				<integer>15604240</integer>
				<key>Conditions</key>
				<dict>
					<key>ConditionList</key>
					<array>
						<dict>
							<key>ConditionType</key>
							<string>Variable</string>
							<key>Variable</key>
							<string>instance_BackupFoldersRemoved</string>
							<key>VariableConditionType</key>
							<string>GreaterThan</string>
							<key>VariableValue</key>
							<string>0</string>
						</dict>
					</array>
					<key>ConditionListMatch</key>
					<string>All</string>
				</dict>
				<key>ElseActions</key>
				<array>
					<dict>
						<key>ActionUID</key>
						<integer>15604245</integer>
						<key>IsDisclosed</key>
						<false/>
						<key>MacroActionType</key>
						<string>SetVariableToText</string>
						<key>Text</key>
						<string>%Delete%</string>
						<key>Variable</key>
						<string>instance_BackupsRemovedText</string>
					</dict>
				</array>
				<key>IsDisclosed</key>
				<false/>
				<key>MacroActionType</key>
				<string>IfThenElse</string>
				<key>ThenActions</key>
				<array>
					<dict>
						<key>ActionName</key>
						<string>Change note depending on how many backups were removed</string>
						<key>ActionUID</key>
						<integer>15604241</integer>
						<key>Conditions</key>
						<dict>
							<key>ConditionList</key>
							<array>
								<dict>
									<key>ConditionType</key>
									<string>Variable</string>
									<key>Variable</key>
									<string>instance_BackupFoldersRemoved</string>
									<key>VariableConditionType</key>
									<string>Is</string>
									<key>VariableValue</key>
									<string>1</string>
								</dict>
							</array>
							<key>ConditionListMatch</key>
							<string>All</string>
						</dict>
						<key>ElseActions</key>
						<array>
							<dict>
								<key>ActionUID</key>
								<integer>15604243</integer>
								<key>IsDisclosed</key>
								<false/>
								<key>MacroActionType</key>
								<string>SetVariableToText</string>
								<key>Text</key>
								<string>Note: The %Variable%instance_BackupFoldersRemoved% oldest backups have been removed to maintain your limit of %Variable%instance_BackupQty% backups.</string>
								<key>Variable</key>
								<string>instance_BackupsRemovedText</string>
							</dict>
						</array>
						<key>MacroActionType</key>
						<string>IfThenElse</string>
						<key>ThenActions</key>
						<array>
							<dict>
								<key>ActionUID</key>
								<integer>15604242</integer>
								<key>IsDisclosed</key>
								<false/>
								<key>MacroActionType</key>
								<string>SetVariableToText</string>
								<key>Text</key>
								<string>Note: The oldest backup has been removed to maintain your limit of %Variable%instance_BackupQty% backups.</string>
								<key>Variable</key>
								<string>instance_BackupsRemovedText</string>
							</dict>
						</array>
						<key>TimeOutAbortsMacro</key>
						<true/>
					</dict>
					<dict>
						<key>ActionName</key>
						<string>Remove the removed backup(s) from the total</string>
						<key>ActionUID</key>
						<integer>15604244</integer>
						<key>IsDisclosed</key>
						<false/>
						<key>MacroActionType</key>
						<string>SetVariableToCalculation</string>
						<key>Text</key>
						<string>instance_BackupCount-instance_BackupFoldersRemoved</string>
						<key>UseFormat</key>
						<false/>
						<key>Variable</key>
						<string>instance_BackupCount</string>
					</dict>
				</array>
				<key>TimeOutAbortsMacro</key>
				<true/>
			</dict>
		</array>
		<key>CreationDate</key>
		<real>725560211.02311504</real>
		<key>CustomIconData</key>
		<string>KMEC=Square=KMCOLOR:255,255,255,0==86=0=0=0=KMCOLOR:0,0,0,255</string>
		<key>ModificationDate</key>
		<real>759492796.131477</real>
		<key>Name</key>
		<string>tasks | 08 Trim backups</string>
		<key>Triggers</key>
		<array/>
		<key>UID</key>
		<string>FC808E81-022F-4523-9B42-B2F75BCF9D8D</string>
	</dict>
</array>
</plist>
