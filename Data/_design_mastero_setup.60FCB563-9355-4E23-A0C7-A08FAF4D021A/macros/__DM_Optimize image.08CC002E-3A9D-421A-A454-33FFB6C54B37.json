{
	"UID": "08CC002E-3A9D-421A-A454-33FFB6C54B37",
	"CreationDate": 660961061.578939,
	"ModificationDate": 670077268.766195,
	"Triggers": [],
	"Actions": [
		{
			"MacroActionType": "IfThenElse",
			"ElseActions": [],
			"Conditions": {
				"ConditionListMatch": "All",
				"ConditionList": [
					{
						"ConditionType": "Variable",
						"VariableValue": "value",
						"Variable": "tiny_png_file_to_optimize",
						"VariableConditionType": "IsEmpty"
					}
				]
			},
			"ThenActions": [
				{
					"MacroActionType": "Cancel",
					"ActionUID": 63734,
					"Action": "CancelThisMacro"
				}
			],
			"TimeOutAbortsMacro": true,
			"ActionUID": 63733
		},
		{
			"MacroActionType": "Filter",
			"Source": "Variable",
			"Action": "BaseName",
			"Variable": "tiny_png_file_to_optimize",
			"Destination": "Variable",
			"ActionUID": 63735,
			"DestinationVariable": "tiny_png_file_basename"
		},
		{
			"MacroActionType": "Filter",
			"Source": "Variable",
			"Action": "PathExtension",
			"Variable": "tiny_png_file_to_optimize",
			"Destination": "Variable",
			"ActionUID": 63736,
			"DestinationVariable": "tiny_png_file_ext"
		},
		{
			"MacroActionType": "SetVariableToText",
			"Variable": "tiny_png_file_name",
			"Text": "%Variable%tiny_png_file_basename%_optimized.%Variable%tiny_png_file_ext%",
			"ActionUID": 63737
		},
		{
			"MacroActionType": "SearchReplace",
			"Search": "%Space%",
			"Source": "Variable",
			"Variable": "tiny_png_file_name",
			"Action": "IgnoreCaseString",
			"ActionUID": 63738,
			"Replace": "_",
			"Which": "All"
		},
		{
			"MacroActionType": "SearchReplace",
			"Search": "%Space%",
			"Source": "Variable",
			"Variable": "tiny_png_file_name",
			"Action": "IgnoreCaseString",
			"ActionUID": 64125,
			"Replace": "\\%Space%",
			"Which": "All"
		},
		{
			"MacroActionType": "Filter",
			"Source": "Variable",
			"Action": "ExpandTildeInPath",
			"Variable": "tiny_png_file_to_optimize",
			"ActionUID": 63739
		},
		{
			"MacroActionType": "Filter",
			"Source": "Variable",
			"Action": "DeleteLastPathComponent",
			"Variable": "tiny_png_file_to_optimize",
			"Destination": "Variable",
			"ActionUID": 63740,
			"DestinationVariable": "tiny_png_file_dir"
		},
		{
			"MacroActionType": "ExecuteShellScript",
			"ActionName": "Send selected file to TinyPNG",
			"TrimResults": true,
			"Source": "Nothing",
			"Variable": "tiny_png_response",
			"IncludeStdErr": false,
			"ActionUID": 63741,
			"UseText": true,
			"TrimResultsNew": true,
			"TimeOutAbortsMacro": true,
			"Path": "",
			"DisplayKind": "Variable",
			"HonourFailureSettings": true,
			"Text": "curl --user api:$KMVAR_tiny_png_API_KEY \\\n      --data-binary @\"$KMVAR_tiny_png_file_to_optimize\" https://api.tinify.com/shrink"
		},
		{
			"MacroActionType": "SetVariableToText",
			"ActionName": "Extract URL of optimied image",
			"Variable": "tiny_png_result",
			"Text": "%JSONValueCompact%tiny_png_response.output.url%",
			"ActionUID": 63742
		},
		{
			"MacroActionType": "ExecuteShellScript",
			"TrimResults": true,
			"Source": "Nothing",
			"IncludeStdErr": false,
			"ActionUID": 63743,
			"UseText": true,
			"TrimResultsNew": true,
			"TimeOutAbortsMacro": true,
			"Path": "",
			"DisplayKind": "Briefly",
			"HonourFailureSettings": true,
			"Text": "curl -o \"$KMVAR_tiny_png_file_dir/$KMVAR_tiny_png_file_name\" $KMVAR_tiny_png_result"
		},
		{
			"MacroActionType": "Notification",
			"Title": "%Variable%tiny_png_file_to_optimize%",
			"SoundName": "",
			"Subtitle": "",
			"Text": "",
			"ActionUID": 64121
		},
		{
			"MacroActionType": "SetVariableToText",
			"Variable": "tiny_png_file_optimized_fullpath",
			"Text": "%Variable%tiny_png_file_dir%/%Variable%tiny_png_file_name%",
			"ActionUID": 63744
		},
		{
			"MacroActionType": "SetVariableToText",
			"Variable": "tiny_png_file_to_optimize",
			"Text": "%Delete%",
			"ActionUID": 63745
		}
	],
	"Name": "__DM:Optimize image",
	"CustomIconData": "KMEP-GenericApplication-/Users/overment/Applications/Chrome Apps.localized/Design Maestro | Automate your design workflow.app"
}