{
	"UID": "3475EC2D-E7D0-4B24-9D50-A1107D7B6BA1",
	"CreationDate": 725560211.024496,
	"ModificationDate": 759492736.813129,
	"Triggers": [
		{
			"ReturnsValue": true,
			"MacroTriggerType": "Subroutine",
			"Parameters": [
				"localDotCommands",
				"localTheCommands",
				"localWhichDatabase",
				"localCallingRoutine"
			]
		}
	],
	"IsActive": false,
	"Actions": [
		{
			"MacroActionType": "Comment",
			"Title": "dbase: Run database action",
			"StyledText": "\n\t\t\t\t\t\t\t41E4D515-C065-4C24-9859-EA2479C52CC9\n\t\t\t\t\t\t\tcnRmZAAAAAADAAAAAgAA\n\t\t\t\t\t\t\tAAcAAABUWFQucnRmAQAA\n\t\t\t\t\t\t\tAC4UAwAAKwAAAAEAAAAM\n\t\t\t\t\t\t\tAwAAe1xydGYxXGFuc2lc\n\t\t\t\t\t\t\tYW5zaWNwZzEyNTJcY29j\n\t\t\t\t\t\t\tb2FydGYyNzA5Clxjb2Nv\n\t\t\t\t\t\t\tYXRleHRzY2FsaW5nMFxj\n\t\t\t\t\t\t\tb2NvYXBsYXRmb3JtMHtc\n\t\t\t\t\t\t\tZm9udHRibFxmMFxmc3dp\n\t\t\t\t\t\t\tc3NcZmNoYXJzZXQwIEhl\n\t\t\t\t\t\t\tbHZldGljYS1Cb2xkO1xm\n\t\t\t\t\t\t\tMVxmc3dpc3NcZmNoYXJz\n\t\t\t\t\t\t\tZXQwIEhlbHZldGljYTt9\n\t\t\t\t\t\t\tCntcY29sb3J0Ymw7XHJl\n\t\t\t\t\t\t\tZDI1NVxncmVlbjI1NVxi\n\t\t\t\t\t\t\tbHVlMjU1O1xyZWQwXGdy\n\t\t\t\t\t\t\tZWVuMFxibHVlMDt9Cntc\n\t\t\t\t\t\t\tKlxleHBhbmRlZGNvbG9y\n\t\t\t\t\t\t\tdGJsOztcY3NzcmdiXGMw\n\t\t\t\t\t\t\tXGMwXGMwXGM4NDcwNlxj\n\t\t\t\t\t\t\tbmFtZSBjb250cm9sVGV4\n\t\t\t\t\t\t\tdENvbG9yO30KXHBhcmRc\n\t\t\t\t\t\t\tdHg1NjBcdHgxMTIwXHR4\n\t\t\t\t\t\t\tMTY4MFx0eDIyNDBcdHgy\n\t\t\t\t\t\t\tODAwXHR4MzM2MFx0eDM5\n\t\t\t\t\t\t\tMjBcdHg0NDgwXHR4NTA0\n\t\t\t\t\t\t\tMFx0eDU2MDBcdHg2MTYw\n\t\t\t\t\t\t\tXHR4NjcyMFxwYXJkaXJu\n\t\t\t\t\t\t\tYXR1cmFsXHBhcnRpZ2h0\n\t\t\t\t\t\t\tZW5mYWN0b3IwCgpcZjBc\n\t\t\t\t\t\t\tYlxmczI2IFxjZjIgUHVy\n\t\t\t\t\t\t\tcG9zZQpcZjFcYjAgXAog\n\t\t\t\t\t\t\tIFwnOTUgQSBzaW1wbGUg\n\t\t\t\t\t\t\tcm91dGluZSB0byBleGVj\n\t\t\t\t\t\t\tdXRlIHRoZSBwcm92aWRl\n\t\t\t\t\t\t\tZCBTUUwgc3RhdGVtZW50\n\t\t\t\t\t\t\tcyBvbiB0aGUgdHdvIGRh\n\t\t\t\t\t\t\tdGFiYXNlcy4gQWNjZXB0\n\t\t\t\t\t\t\tcyBhIGRhdGFiYXNlIG5h\n\t\t\t\t\t\t\tbWUsIGFuZCBhIGxpc3Qg\n\t\t\t\t\t\t\tb2YgU1FMIGNvbW1hbmRz\n\t\t\t\t\t\t\tIGluIGEgdmFyaWFibGUs\n\t\t\t\t\t\t\tIHRoZW4gZXhlY3V0ZXMg\n\t\t\t\t\t\t\tdmlhIHRoZSBzcWxpdGUz\n\t\t\t\t\t\t\tIGNvbW1hbmQgb24gdGhl\n\t\t\t\t\t\t\tIGNob3NlbiBkYXRhYmFz\n\t\t\t\t\t\t\tZSB2aWEgdGhlIGNvbW1h\n\t\t\t\t\t\t\tbmQgbGluZSBpbnRlcmZh\n\t\t\t\t\t\t\tY2UuIENhbiBhbHNvIGFj\n\t\t\t\t\t\t\tY2VwdCBkb3QgY29tbWFu\n\t\t\t\t\t\t\tZHMgdG8gY2hhbmdlIHNx\n\t\t\t\t\t\t\tbGl0ZTMgYmVoYXZpb3Is\n\t\t\t\t\t\t\tIGkuZS4gdGhlIHNlcGFy\n\t\t\t\t\t\t\tYXRvciBjaGFyYWN0ZXJz\n\t\t\t\t\t\t\tIGJldHdlZW4gcmVjb3Jk\n\t\t\t\t\t\t\tcy59AQAAACMAAAABAAAA\n\t\t\t\t\t\t\tBwAAAFRYVC5ydGYQAAAA\n\t\t\t\t\t\t\t3fZbZbYBAAAAAAAAAAAA\n\t\t\t\t\t\t\tAA==\n\t\t\t\t\t\t\t41E4D515-C065-4C24-9859-EA2479C52CC9\n\t\t\t\t\t\t\t",
			"ActionColor": "Teal",
			"ActionUID": 15603598
		},
		{
			"MacroActionType": "Group",
			"ActionName": "How about we do some error trapping before killing the macro due to stupidity?",
			"Actions": [
				{
					"MacroActionType": "IfThenElse",
					"ActionName": "Check for missing Macros database path",
					"ActionUID": 15603600,
					"IsDisclosed": false,
					"ElseActions": [],
					"TimeOutAbortsMacro": true,
					"Conditions": {
						"ConditionListMatch": "Any",
						"ConditionList": [
							{
								"ConditionType": "Variable",
								"VariableValue": "value",
								"Variable": "instance_theDatabasePath",
								"VariableConditionType": "IsEmpty"
							}
						]
					},
					"ElseActionListDisclosed": false,
					"ThenActions": [
						{
							"MacroActionType": "SetVariableToText",
							"IsDisclosed": false,
							"Where": "Append",
							"Variable": "local_MissingData",
							"Text": "• Path to the Macros database\n",
							"ActionUID": 15603601
						}
					]
				},
				{
					"MacroActionType": "IfThenElse",
					"ActionName": "Check for missing Settings database path",
					"ActionUID": 15603602,
					"IsDisclosed": false,
					"ElseActions": [],
					"TimeOutAbortsMacro": true,
					"Conditions": {
						"ConditionListMatch": "Any",
						"ConditionList": [
							{
								"ConditionType": "Variable",
								"VariableValue": "value",
								"Variable": "instance_theSettingsPath",
								"VariableConditionType": "IsEmpty"
							}
						]
					},
					"ElseActionListDisclosed": false,
					"ThenActions": [
						{
							"MacroActionType": "SetVariableToText",
							"Where": "Append",
							"Variable": "local_MissingData",
							"Text": "• Path to the Settings database\n",
							"ActionUID": 15603603
						}
					]
				},
				{
					"MacroActionType": "IfThenElse",
					"ActionName": "Check for missing database identifier",
					"ActionUID": 15603604,
					"IsDisclosed": false,
					"ElseActions": [],
					"TimeOutAbortsMacro": true,
					"Conditions": {
						"ConditionListMatch": "Any",
						"ConditionList": [
							{
								"ConditionType": "Variable",
								"VariableValue": "value",
								"Variable": "localWhichDatabase",
								"VariableConditionType": "IsEmpty"
							}
						]
					},
					"ElseActionListDisclosed": false,
					"ThenActions": [
						{
							"MacroActionType": "SetVariableToText",
							"Where": "Append",
							"Variable": "local_MissingData",
							"Text": "• Name of database for the SQL commands to work on\n",
							"ActionUID": 15603605
						}
					]
				},
				{
					"MacroActionType": "Switch",
					"ActionName": "If anything's missing, end macro and alert user",
					"Source": "Variable",
					"ActionUID": 15603606,
					"IsDisclosed": false,
					"Variable": "local_MissingData",
					"CaseEntries": [
						{
							"Actions": [
								{
									"MacroActionType": "Filter",
									"IsDisclosed": false,
									"Source": "Variable",
									"Action": "TrimWhitespace",
									"Variable": "local_MissingData",
									"ActionUID": 15603607
								},
								{
									"MacroActionType": "PromptForUserInput",
									"Title": "Fatal error: Missing key data, cannot proceed",
									"Prompt": "You really shouldn't be seeing this message, but the following data is missing, and the macro cannot work with its databases without it:\n\n%Variable%local_MissingData%\n\nMacroBackerUpper will now quit; please contact Rob on the Keyboard Maestro forums (there's a link in the Info: Read me First macro) and provide the above information.\n\nIf you try to run MacroBackerUpper again, you'll probably see this message again, so please do contact me!",
									"ActionUID": 15603608,
									"TimeOutAbortsMacro": true,
									"Buttons": [
										{
											"Button": "OK",
											"Cancel": true
										}
									],
									"Variables": []
								}
							],
							"ConditionType": "IsNotEmpty",
							"TestValue": ""
						}
					]
				}
			],
			"TimeOutAbortsMacro": true,
			"ActionUID": 15603599
		},
		{
			"MacroActionType": "Switch",
			"ActionName": "If debug enabled, log the calling routine",
			"Source": "Variable",
			"ActionUID": 15603609,
			"IsDisclosed": false,
			"Variable": "instance_LogActivity",
			"CaseEntries": [
				{
					"Actions": [
						{
							"MacroActionType": "Log",
							"ActionUID": 15603610,
							"Text": "MBU SQL processor task: %Variable%localCallingRoutine%"
						}
					],
					"ConditionType": "Is",
					"TestValue": "TRUE"
				}
			]
		},
		{
			"MacroActionType": "Switch",
			"ActionName": "Set the database to work with",
			"Source": "Variable",
			"ActionUID": 15603611,
			"IsDisclosed": false,
			"Variable": "localWhichDatabase",
			"CaseEntries": [
				{
					"Actions": [
						{
							"MacroActionType": "SetVariableToText",
							"Variable": "local_TheDatabase",
							"Text": "%Variable%instance_theDatabasePath%",
							"ActionUID": 15603612
						}
					],
					"ConditionType": "Is",
					"TestValue": "Macros"
				},
				{
					"Actions": [
						{
							"MacroActionType": "SetVariableToText",
							"Variable": "local_TheDatabase",
							"Text": "%Variable%instance_theSettingsPath%",
							"ActionUID": 15603613
						}
					],
					"ConditionType": "Is",
					"TestValue": "Settings"
				}
			]
		},
		{
			"MacroActionType": "Group",
			"ActionName": "SQL: Execute arbitrary command",
			"ActionUID": 15603614,
			"IsDisclosed": false,
			"Actions": [
				{
					"MacroActionType": "ExecuteShellScript",
					"IncludedVariables": [
						"9999"
					],
					"TrimResults": false,
					"Source": "Nothing",
					"Variable": "localTheResults",
					"IncludeStdErr": false,
					"ActionUID": 15603615,
					"UseText": true,
					"TrimResultsNew": false,
					"TimeOutAbortsMacro": true,
					"Path": "",
					"DisplayKind": "Variable",
					"HonourFailureSettings": true,
					"Text": "sqlite3 \"$KMVAR_local_TheDatabase\" << EOF\n$KMVAR_localDotCommands\n$KMVAR_localTheCommands;\nEOF"
				},
				{
					"MacroActionType": "Return",
					"ActionUID": 15603616,
					"Text": "%Variable%localTheResults%"
				}
			],
			"TimeOutAbortsMacro": true,
			"ActionColor": "Aqua"
		}
	],
	"Name": "dbase | 10 Run database action",
	"CustomIconData": "KMEC=Square=KMCOLOR:255,255,255,0==86=0=0=0=KMCOLOR:0,0,0,255"
}