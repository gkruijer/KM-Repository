{
	"UID": "BDA25BD8-2A45-4792-AA2B-BAEF5025DAFD",
	"CreationDate": 721235948.188228,
	"ModificationDate": 721244134.564381,
	"Triggers": [],
	"Actions": [
		{
			"MacroActionType": "Comment",
			"Title": "tasks: Create a new backup",
			"StyledText": "\n\t\t\t\t\t\t\t41E4D515-C065-4C24-9859-EA2479C52CC9\n\t\t\t\t\t\t\tcnRmZAAAAAADAAAAAgAA\n\t\t\t\t\t\t\tAAcAAABUWFQucnRmAQAA\n\t\t\t\t\t\t\tAC7vAQAAKwAAAAEAAADn\n\t\t\t\t\t\t\tAQAAe1xydGYxXGFuc2lc\n\t\t\t\t\t\t\tYW5zaWNwZzEyNTJcY29j\n\t\t\t\t\t\t\tb2FydGYyNzA5Clxjb2Nv\n\t\t\t\t\t\t\tYXRleHRzY2FsaW5nMFxj\n\t\t\t\t\t\t\tb2NvYXBsYXRmb3JtMHtc\n\t\t\t\t\t\t\tZm9udHRibFxmMFxmc3dp\n\t\t\t\t\t\t\tc3NcZmNoYXJzZXQwIEhl\n\t\t\t\t\t\t\tbHZldGljYS1Cb2xkO1xm\n\t\t\t\t\t\t\tMVxmc3dpc3NcZmNoYXJz\n\t\t\t\t\t\t\tZXQwIEhlbHZldGljYTt9\n\t\t\t\t\t\t\tCntcY29sb3J0Ymw7XHJl\n\t\t\t\t\t\t\tZDI1NVxncmVlbjI1NVxi\n\t\t\t\t\t\t\tbHVlMjU1O1xyZWQwXGdy\n\t\t\t\t\t\t\tZWVuMFxibHVlMDt9Cntc\n\t\t\t\t\t\t\tKlxleHBhbmRlZGNvbG9y\n\t\t\t\t\t\t\tdGJsOztcY3NzcmdiXGMw\n\t\t\t\t\t\t\tXGMwXGMwXGM4NDcwNlxj\n\t\t\t\t\t\t\tbmFtZSBjb250cm9sVGV4\n\t\t\t\t\t\t\tdENvbG9yO30KXHBhcmRc\n\t\t\t\t\t\t\tdHg1NjBcdHgxMTIwXHR4\n\t\t\t\t\t\t\tMTY4MFx0eDIyNDBcdHgy\n\t\t\t\t\t\t\tODAwXHR4MzM2MFx0eDM5\n\t\t\t\t\t\t\tMjBcdHg0NDgwXHR4NTA0\n\t\t\t\t\t\t\tMFx0eDU2MDBcdHg2MTYw\n\t\t\t\t\t\t\tXHR4NjcyMFxwYXJkaXJu\n\t\t\t\t\t\t\tYXR1cmFsXHBhcnRpZ2h0\n\t\t\t\t\t\t\tZW5mYWN0b3IwCgpcZjBc\n\t\t\t\t\t\t\tYlxmczI2IFxjZjIgUHVy\n\t\t\t\t\t\t\tcG9zZQpcZjFcYjAgXAog\n\t\t\t\t\t\t\tIFwnOTUgUnVucyB0aGUg\n\t\t\t\t\t\t\tZnVsbCBtYWNybyBleHBv\n\t\t\t\t\t\t\tcnQgZnJvbSBLZXlib2Fy\n\t\t\t\t\t\t\tZCBNYWVzdHJvfQEAAAAj\n\t\t\t\t\t\t\tAAAAAQAAAAcAAABUWFQu\n\t\t\t\t\t\t\tcnRmEAAAAI9rI2W2AQAA\n\t\t\t\t\t\t\tAAAAAAAAAAA=\n\t\t\t\t\t\t\t41E4D515-C065-4C24-9859-EA2479C52CC9\n\t\t\t\t\t\t\t",
			"ActionColor": "Teal",
			"ActionUID": 15364317
		},
		{
			"MacroActionType": "Group",
			"ActionName": "Set the format for the date and time stamp on the backup folder's name",
			"Actions": [
				{
					"MacroActionType": "Comment",
					"Title": "",
					"ActionName": "Please do not edit the date format! Many functions require having a simple filename-based date sort.",
					"ActionUID": 15364319,
					"IsDisclosed": false,
					"ActionColor": "Red",
					"StyledText": "\n\t\t\t\t\t\t\t\t41E4D515-C065-4C24-9859-EA2479C52CC9\n\t\t\t\t\t\t\t\te1xydGYxXGFu\n\t\t\t\t\t\t\t\tc2lcYW5zaWNw\n\t\t\t\t\t\t\t\tZzEyNTJcY29j\n\t\t\t\t\t\t\t\tb2FydGYyNzA5\n\t\t\t\t\t\t\t\tClxjb2NvYXRl\n\t\t\t\t\t\t\t\teHRzY2FsaW5n\n\t\t\t\t\t\t\t\tMFxjb2NvYXBs\n\t\t\t\t\t\t\t\tYXRmb3JtMHtc\n\t\t\t\t\t\t\t\tZm9udHRibH0K\n\t\t\t\t\t\t\t\te1xjb2xvcnRi\n\t\t\t\t\t\t\t\tbDtccmVkMjU1\n\t\t\t\t\t\t\t\tXGdyZWVuMjU1\n\t\t\t\t\t\t\t\tXGJsdWUyNTU7\n\t\t\t\t\t\t\t\tfQp7XCpcZXhw\n\t\t\t\t\t\t\t\tYW5kZWRjb2xv\n\t\t\t\t\t\t\t\tcnRibDs7fQp9\n\t\t\t\t\t\t\t\t\t41E4D515-C065-4C24-9859-EA2479C52CC9\n\t\t\t\t\t\t\t\t"
				},
				{
					"MacroActionType": "SetVariableToText",
					"IsDisclosed": false,
					"Variable": "local_BackupTime",
					"Text": "%ICUDateTime%yyyy-MM-dd_HH•mm•ss%",
					"ActionUID": 15364320
				}
			],
			"IsDisclosed": false,
			"TimeOutAbortsMacro": true,
			"ActionUID": 15364318
		},
		{
			"MacroActionType": "SetVariableToText",
			"ActionName": "Add the date-time stamp to the backup folder's name",
			"IsDisclosed": false,
			"Variable": "local_BackupFilename",
			"Text": "%Variable%local_BackupTime%",
			"ActionUID": 15364321
		},
		{
			"MacroActionType": "Group",
			"ActionName": "Prepare the save path for entering in the dialog",
			"Actions": [
				{
					"MacroActionType": "SetVariableToText",
					"ActionName": "Create an editable version of the backup location variable",
					"Variable": "local_TheBackupPath",
					"Text": "%Variable%rg_MBU_BackupLoc%",
					"ActionUID": 15364323
				},
				{
					"MacroActionType": "Substring",
					"ActionName": "Strip the leading slash, as we need to type that separately",
					"Second": "999",
					"Delete": false,
					"IsDisclosed": false,
					"First": "2",
					"ActionUID": 15364324,
					"Source": "Variable",
					"StringRangeType": "Range",
					"Variable": "local_TheBackupPath"
				}
			],
			"IsDisclosed": false,
			"TimeOutAbortsMacro": true,
			"ActionUID": 15364322
		},
		{
			"MacroActionType": "Group",
			"ActionName": "Save current window size and location to variables",
			"Actions": [
				{
					"MacroActionType": "SetVariableToText",
					"Variable": "WindowLoc",
					"Text": "%FrontWindowFrame%",
					"ActionUID": 15364326
				},
				{
					"MacroActionType": "SetVariableToText",
					"IsDisclosed": false,
					"Variable": "local_WindowLeft",
					"Text": "%Calculate%WindowLoc.Left%",
					"ActionUID": 15364327
				},
				{
					"MacroActionType": "SetVariableToText",
					"IsDisclosed": false,
					"Variable": "local_WindowTop",
					"Text": "%Calculate%WindowLoc.Top%",
					"ActionUID": 15364328
				},
				{
					"MacroActionType": "SetVariableToText",
					"IsDisclosed": false,
					"Variable": "local_WindowWidth",
					"Text": "%Calculate%WindowLoc.Width%",
					"ActionUID": 15364329
				},
				{
					"MacroActionType": "SetVariableToText",
					"IsDisclosed": false,
					"Variable": "local_WindowHeight",
					"Text": "%Calculate%WindowLoc.Height%",
					"ActionUID": 15364330
				}
			],
			"IsDisclosed": false,
			"TimeOutAbortsMacro": true,
			"ActionUID": 15364325
		},
		{
			"MacroActionType": "ManipulateWindow",
			"ActionName": "Center the window so the export dialog is centered…ugh",
			"TargetApplication": {
				"BundleIdentifier": "com.stairways.keyboardmaestro.editor",
				"Name": "Keyboard Maestro",
				"NewFile": "/Applications/Keyboard Maestro.app"
			},
			"WindowName": "",
			"HorizontalExpression": "125",
			"TargetingType": "Specific",
			"Action": "CenterWindow",
			"ActionUID": 15364331,
			"VerticalExpression": "125",
			"WidthExpression": "300",
			"Targeting": "FrontWindow",
			"IsDisclosed": false,
			"HeightExpression": "300",
			"WindowIndexExpression": "2"
		},
		{
			"MacroActionType": "ExecuteMacro",
			"MacroUID": "3AFC8DA7-1C83-4CB8-908B-7AD2169EA537",
			"ActionUID": 15364332,
			"IsDisclosed": false,
			"TimeOutAbortsMacro": true,
			"ActionColor": "Purple",
			"UseParameter": false,
			"Asynchronously": true
		},
		{
			"MacroActionType": "SelectMenuItem",
			"ActionUID": 15364333,
			"Menu": [
				"File",
				"Export",
				"Export All Macros as Folder…"
			],
			"IsDisclosed": false,
			"TargetApplication": {
				"BundleIdentifier": "com.stairways.keyboardmaestro.editor",
				"Name": "Keyboard Maestro",
				"NewFile": "/Applications/Keyboard Maestro.app"
			},
			"TargetingType": "Specific",
			"StopOnFailure": false
		},
		{
			"MacroActionType": "Group",
			"ActionName": "Enter the backup folder path in the dialog",
			"Actions": [
				{
					"MacroActionType": "PauseUntil",
					"ActionName": "Make sure the dialog is onscreen before proceeding",
					"IsDisclosed": false,
					"Conditions": {
						"ConditionListMatch": "All",
						"ConditionList": [
							{
								"ButtonConditionSelectionType": "Is",
								"ConditionType": "Button",
								"ButtonTitle": "Save",
								"ButtonConditionType": "Exists"
							}
						]
					},
					"TimeOutAbortsMacro": true,
					"ActionUID": 15364335
				},
				{
					"MacroActionType": "Pause",
					"IsDisclosed": false,
					"TimeOutAbortsMacro": true,
					"Time": ".2",
					"ActionUID": 15364336
				},
				{
					"MacroActionType": "InsertText",
					"ActionName": "Insert the backup filename",
					"IsDisclosed": false,
					"Action": "ByPasting",
					"Text": "%Variable%local_BackupFilename%",
					"ActionUID": 15364337
				},
				{
					"MacroActionType": "Pause",
					"IsDisclosed": false,
					"TimeOutAbortsMacro": true,
					"Time": ".2",
					"ActionUID": 15364338
				},
				{
					"MacroActionType": "SimulateKeystroke",
					"ActionUID": 15364339,
					"IsDisclosed": false,
					"ReleaseAll": false,
					"TargetApplication": {},
					"TargetingType": "Front",
					"KeyCode": 5,
					"Modifiers": 768
				},
				{
					"MacroActionType": "PauseUntil",
					"ActionName": "Make sure the dialog has changed before proceeding",
					"IsDisclosed": false,
					"Conditions": {
						"ConditionListMatch": "All",
						"ConditionList": [
							{
								"ButtonConditionSelectionType": "Is",
								"ConditionType": "Button",
								"ButtonTitle": "Save",
								"ButtonConditionType": "DoesNotExist"
							}
						]
					},
					"TimeOutAbortsMacro": true,
					"ActionUID": 15364340
				},
				{
					"MacroActionType": "InsertText",
					"Action": "ByTyping",
					"ActionUID": 15364341,
					"IsDisclosed": false,
					"TargetApplication": {},
					"Text": "/",
					"TargetingType": "Front"
				},
				{
					"MacroActionType": "Pause",
					"IsDisclosed": false,
					"TimeOutAbortsMacro": true,
					"Time": ".3",
					"ActionUID": 15364342
				},
				{
					"MacroActionType": "InsertText",
					"ActionName": "Insert the path",
					"IsDisclosed": false,
					"Action": "ByPasting",
					"Text": "%Variable%local_TheBackupPath%",
					"ActionUID": 15364343
				},
				{
					"MacroActionType": "Pause",
					"IsDisclosed": false,
					"TimeOutAbortsMacro": true,
					"Time": ".2",
					"ActionUID": 15364344
				},
				{
					"MacroActionType": "SimulateKeystroke",
					"ActionUID": 15364345,
					"IsDisclosed": false,
					"ReleaseAll": false,
					"TargetApplication": {},
					"TargetingType": "Front",
					"KeyCode": 36,
					"Modifiers": 0
				},
				{
					"MacroActionType": "PauseUntil",
					"ActionName": "Make sure the dialog is onscreen before proceeding",
					"IsDisclosed": false,
					"Conditions": {
						"ConditionListMatch": "All",
						"ConditionList": [
							{
								"ButtonConditionSelectionType": "Is",
								"ConditionType": "Button",
								"ButtonTitle": "Save",
								"ButtonConditionType": "Exists"
							}
						]
					},
					"TimeOutAbortsMacro": true,
					"ActionUID": 15364346
				},
				{
					"MacroActionType": "SimulateKeystroke",
					"ActionUID": 15364347,
					"IsDisclosed": false,
					"ReleaseAll": false,
					"TargetApplication": {},
					"TargetingType": "Front",
					"KeyCode": 36,
					"Modifiers": 0
				},
				{
					"MacroActionType": "Group",
					"ActionName": "Delete the two clipboard entries from pasting the filename and folder location",
					"Actions": [
						{
							"MacroActionType": "DeletePastClipboard",
							"IsDisclosed": false,
							"PastExpression": "0",
							"ActionUID": 15364349
						},
						{
							"MacroActionType": "DeletePastClipboard",
							"IsDisclosed": false,
							"PastExpression": "1",
							"ActionUID": 15364350
						}
					],
					"IsDisclosed": false,
					"TimeOutAbortsMacro": true,
					"ActionUID": 15364348
				}
			],
			"IsDisclosed": false,
			"TimeOutAbortsMacro": true,
			"ActionUID": 15364334
		},
		{
			"MacroActionType": "ManipulateWindow",
			"ActionName": "Restore window to original size and location",
			"TargetApplication": {},
			"WindowName": "",
			"HorizontalExpression": "local_WindowLeft",
			"TargetingType": "Front",
			"Action": "MoveAndResize",
			"ActionUID": 15364351,
			"VerticalExpression": "local_WindowTop",
			"WidthExpression": "local_WindowWidth",
			"Targeting": "FrontWindow",
			"IsDisclosed": false,
			"HeightExpression": "local_WindowHeight",
			"WindowIndexExpression": "2"
		},
		{
			"MacroActionType": "Group",
			"ActionName": "Confirm folder is correct—sometimes KM misses the name, somehow",
			"Actions": [
				{
					"MacroActionType": "ExecuteShellScript",
					"ActionName": "Get the newest folder",
					"IncludedVariables": [
						"9999"
					],
					"TrimResults": true,
					"Source": "Nothing",
					"Variable": "local_backupFolderCheck",
					"IncludeStdErr": false,
					"ActionUID": 15365008,
					"UseText": true,
					"TrimResultsNew": true,
					"TimeOutAbortsMacro": true,
					"Path": "",
					"DisplayKind": "Variable",
					"IsDisclosed": false,
					"HonourFailureSettings": true,
					"Text": "find \"$KMVAR_rg_MBU_BackupLoc\" -maxdepth 1 -name \"Untitled*\""
				},
				{
					"MacroActionType": "Switch",
					"ActionName": "If the name isn't right, correct it",
					"CaseEntries": [
						{
							"Actions": [
								{
									"MacroActionType": "File",
									"Source": "%Variable%rg_MBU_BackupLoc%/Untitled Macros Folder",
									"Operation": "Move",
									"Destination": "%Variable%rg_MBU_BackupLoc%/%Variable%local_BackupFilename%",
									"ActionUID": 15365011
								}
							],
							"ConditionType": "Contains",
							"TestValue": "Untitled Macros Folder"
						}
					],
					"Source": "Variable",
					"Variable": "local_backupFolderCheck",
					"ActionUID": 15365009
				}
			],
			"IsDisclosed": false,
			"TimeOutAbortsMacro": true,
			"ActionUID": 15365007
		},
		{
			"MacroActionType": "Group",
			"ActionName": "This section simply delays the processing of the backup to make sure everything has copied",
			"Actions": [
				{
					"MacroActionType": "SetNextEngineWindow",
					"Action": "CenterWindowAt",
					"ActionUID": 15364353,
					"WidthExpression": "300",
					"HorizontalExpression": "ROUND(SCREENVISIBLE(Front,Width)/2)",
					"VerticalExpression": "125",
					"HeightExpression": "300"
				},
				{
					"MacroActionType": "Pause",
					"IsDisclosed": false,
					"TimeOutAbortsMacro": true,
					"Time": ".5",
					"ActionUID": 15364354
				},
				{
					"MacroActionType": "Group",
					"ActionName": "A backwards-running progress bar…kinda proud of this one :)",
					"Actions": [
						{
							"MacroActionType": "SetVariableToText",
							"IsDisclosed": false,
							"Variable": "local_TimerVal",
							"Text": "99",
							"ActionUID": 15364356
						},
						{
							"MacroActionType": "SetVariableToText",
							"ActionName": "Desired wait time in seconds",
							"Variable": "local_TimeDuration",
							"Text": "1",
							"ActionUID": 15364357
						},
						{
							"MacroActionType": "SetVariableToCalculation",
							"IsDisclosed": false,
							"UseFormat": false,
							"Variable": "local_TimeStep",
							"Text": "ROUND(100/local_TimeDuration)",
							"ActionUID": 15364358
						},
						{
							"MacroActionType": "Repeat",
							"Actions": [
								{
									"MacroActionType": "SetNextEngineWindow",
									"Action": "CenterWindow",
									"ActionUID": 15364360,
									"IsDisclosed": false,
									"HorizontalExpression": "0",
									"WidthExpression": "300",
									"VerticalExpression": "150",
									"HeightExpression": "300"
								},
								{
									"MacroActionType": "DisplayProgress",
									"Title": "Delaying to make sure copy is done…",
									"IsDisclosed": false,
									"Progress": "local_TimerVal",
									"ActionUID": 15364361
								},
								{
									"MacroActionType": "Pause",
									"IsDisclosed": false,
									"TimeOutAbortsMacro": true,
									"Time": "1",
									"ActionUID": 15364362
								},
								{
									"MacroActionType": "SetVariableToCalculation",
									"IsDisclosed": false,
									"UseFormat": false,
									"Variable": "local_TimerVal",
									"Text": "local_TimerVal-local_TimeStep",
									"ActionUID": 15364363
								}
							],
							"IsDisclosed": false,
							"TimeOutAbortsMacro": true,
							"CountExpression": "local_TimeDuration",
							"ActionUID": 15364359
						},
						{
							"MacroActionType": "DisplayProgress",
							"Title": "Done waiting!",
							"IsDisclosed": false,
							"Progress": "100",
							"ActionUID": 15364364
						}
					],
					"TimeOutAbortsMacro": true,
					"ActionUID": 15364355
				}
			],
			"IsDisclosed": false,
			"TimeOutAbortsMacro": true,
			"ActionUID": 15364352
		}
	],
	"Name": "tasks | 00 Create a new backup",
	"CustomIconData": "KMEC=Square=KMCOLOR:255,255,255,0==86=0=0=0=KMCOLOR:0,0,0,255"
}