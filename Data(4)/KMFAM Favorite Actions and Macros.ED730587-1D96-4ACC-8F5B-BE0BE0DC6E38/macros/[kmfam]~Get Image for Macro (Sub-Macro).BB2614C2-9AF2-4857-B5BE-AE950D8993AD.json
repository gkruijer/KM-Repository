{
	"CreationDate": 491940248.101143,
	"UID": "BB2614C2-9AF2-4857-B5BE-AE950D8993AD",
	"Name": "[kmfam]~Get Image for Macro (Sub-Macro)",
	"Triggers": [],
	"ModificationDate": 495928562.895369,
	"Actions": [
		{
			"MacroActionType": "Comment",
			"Title": "[kmfam]~Get Image for Macro (Sub-Macro) v1.1",
			"StyledText": "\n\t\t\t\t\t\t\t41E4D515-C065-4C24-9859-EA2479C52CC9\n\t\t\t\t\t\t\tcnRmZAAAAAADAAAAAgAA\n\t\t\t\t\t\t\tAAcAAABUWFQucnRmAQAA\n\t\t\t\t\t\t\tAC7tAgAAKwAAAAEAAADl\n\t\t\t\t\t\t\tAgAAe1xydGYxXGFuc2lc\n\t\t\t\t\t\t\tYW5zaWNwZzEyNTJcY29j\n\t\t\t\t\t\t\tb2FydGYxNjcxCntcZm9u\n\t\t\t\t\t\t\tdHRibFxmMFxmc3dpc3Nc\n\t\t\t\t\t\t\tZmNoYXJzZXQwIEhlbHZl\n\t\t\t\t\t\t\tdGljYTt9CntcY29sb3J0\n\t\t\t\t\t\t\tYmw7XHJlZDI1NVxncmVl\n\t\t\t\t\t\t\tbjI1NVxibHVlMjU1O30K\n\t\t\t\t\t\t\te1wqXGV4cGFuZGVkY29s\n\t\t\t\t\t\t\tb3J0Ymw7O30KXHBhcmRc\n\t\t\t\t\t\t\tdHg1NjBcdHgxMTIwXHR4\n\t\t\t\t\t\t\tMTY4MFx0eDIyNDBcdHgy\n\t\t\t\t\t\t\tODAwXHR4MzM2MFx0eDM5\n\t\t\t\t\t\t\tMjBcdHg0NDgwXHR4NTA0\n\t\t\t\t\t\t\tMFx0eDU2MDBcdHg2MTYw\n\t\t\t\t\t\t\tXHR4NjcyMFxwYXJkaXJu\n\t\t\t\t\t\t\tYXR1cmFsXHBhcnRpZ2h0\n\t\t\t\t\t\t\tZW5mYWN0b3IwCgpcZjBc\n\t\t\t\t\t\t\tZnMyNCBcY2YwIE5hbWU6\n\t\t\t\t\t\t\tIFtrbWZhbV1+R2V0IElt\n\t\t\t\t\t\t\tYWdlIGZvciBNYWNybyAo\n\t\t\t\t\t\t\tU3ViLU1hY3JvKVwKVmVy\n\t\t\t\t\t\t\tc2lvbjogMS4xXApVcGRh\n\t\t\t\t\t\t\tdGVkOiAyMDE2LzA5LzE4\n\t\t\t\t\t\t\tIDE0OjU1IFBEVFwKQnk6\n\t\t\t\t\t\t\tIERhbiBUaG9tYXNcClwK\n\t\t\t\t\t\t\tTk9URTogVGhpcyBpcyBh\n\t\t\t\t\t\t\tIFN1Yi1NYWNybywgd2hp\n\t\t\t\t\t\t\tY2ggZ2V0cyBydW4gYnkg\n\t\t\t\t\t\t\tb3RoZXIgbWFjcm9zLiBJ\n\t\t\t\t\t\t\tdCBpcyBub3QgbWVhbnQg\n\t\t\t\t\t\t\tdG8gYmUgcnVuIGJ5IGl0\n\t\t\t\t\t\t\tc2VsZi5cClwKUFVSUE9T\n\t\t\t\t\t\t\tRTpcClwKQ29waWVzIHRo\n\t\t\t\t\t\t\tZSBzZWxlY3RlZCBtYWNy\n\t\t\t\t\t\t\tbyBhcyBhbiBpbWFnZSBh\n\t\t\t\t\t\t\tbmQgc2F2ZXMgdGhlIGlh\n\t\t\t\t\t\t\tZ2UgdG8gYSB0ZW1wIGZp\n\t\t\t\t\t\t\tbGUuXApcClZFUlNJT04g\n\t\t\t\t\t\t\tSElTVE9SWTpcCjEuMSAt\n\t\t\t\t\t\t\tIEFkYXB0aXZlIE9yZGVy\n\t\t\t\t\t\t\taW5nLCBCZXR0ZXIgaW1h\n\t\t\t\t\t\t\tZ2UtaGFuZGxpbmcgZm9y\n\t\t\t\t\t\t\tIFJldGluYSBkaXNwbGF5\n\t\t\t\t\t\t\tcywgVUkgaW1wcm92ZW1l\n\t\t\t\t\t\t\tbnRzLlwKMS4wLjEgLSBX\n\t\t\t\t\t\t\tb3JrYXJvdW5kcyBmb3Ig\n\t\t\t\t\t\t\tWW9zZW1pdGUgYnVncy5c\n\t\t\t\t\t\t\tCjEuMCAtIEluaXRpYWwg\n\t\t\t\t\t\t\tdmVyc2lvbi59AQAAACMA\n\t\t\t\t\t\t\tAAABAAAABwAAAFRYVC5y\n\t\t\t\t\t\t\tdGYQAAAAPbjxW7YBAAAA\n\t\t\t\t\t\t\tAAAAAAAAAA==\n\t\t\t\t\t\t\t41E4D515-C065-4C24-9859-EA2479C52CC9\n\t\t\t\t\t\t\t",
			"ActionColor": "Yellow"
		},
		{
			"MacroActionType": "Comment",
			"Title": "License Agreement / Disclaimer",
			"StyledText": "\n\t\t\t\t\t\t\t41E4D515-C065-4C24-9859-EA2479C52CC9\n\t\t\t\t\t\t\tcnRmZAAAAAADAAAAAgAA\n\t\t\t\t\t\t\tAAcAAABUWFQucnRmAQAA\n\t\t\t\t\t\t\tAC78AwAAKwAAAAEAAAD0\n\t\t\t\t\t\t\tAwAAe1xydGYxXGFuc2lc\n\t\t\t\t\t\t\tYW5zaWNwZzEyNTJcY29j\n\t\t\t\t\t\t\tb2FydGYxNjcxCntcZm9u\n\t\t\t\t\t\t\tdHRibFxmMFxmc3dpc3Nc\n\t\t\t\t\t\t\tZmNoYXJzZXQwIEhlbHZl\n\t\t\t\t\t\t\tdGljYTt9CntcY29sb3J0\n\t\t\t\t\t\t\tYmw7XHJlZDI1NVxncmVl\n\t\t\t\t\t\t\tbjI1NVxibHVlMjU1O30K\n\t\t\t\t\t\t\te1wqXGV4cGFuZGVkY29s\n\t\t\t\t\t\t\tb3J0Ymw7O30KXHBhcmRc\n\t\t\t\t\t\t\tdHg1NjBcdHgxMTIwXHR4\n\t\t\t\t\t\t\tMTY4MFx0eDIyNDBcdHgy\n\t\t\t\t\t\t\tODAwXHR4MzM2MFx0eDM5\n\t\t\t\t\t\t\tMjBcdHg0NDgwXHR4NTA0\n\t\t\t\t\t\t\tMFx0eDU2MDBcdHg2MTYw\n\t\t\t\t\t\t\tXHR4NjcyMFxwYXJkaXJu\n\t\t\t\t\t\t\tYXR1cmFsXHBhcnRpZ2h0\n\t\t\t\t\t\t\tZW5mYWN0b3IwCgpcZjBc\n\t\t\t\t\t\t\tZnMyNCBcY2YwIENvcHly\n\t\t\t\t\t\t\taWdodCAoYykgMjAxNiBE\n\t\t\t\t\t\t\tYW5pZWwgVGhvbWFzXApc\n\t\t\t\t\t\t\tClBlcm1pc3Npb24gdG8g\n\t\t\t\t\t\t\tdXNlLCBjb3B5LCBtb2Rp\n\t\t\t\t\t\t\tZnksIGFuZC9vciBkaXN0\n\t\t\t\t\t\t\tcmlidXRlIHRoaXMgc29m\n\t\t\t\t\t\t\tdHdhcmUgZm9yIGFueSBw\n\t\t\t\t\t\t\tdXJwb3NlIHdpdGggb3Ig\n\t\t\t\t\t\t\td2l0aG91dCBmZWUgaXMg\n\t\t\t\t\t\t\taGVyZWJ5IGdyYW50ZWQs\n\t\t\t\t\t\t\tIHByb3ZpZGVkIHRoYXQg\n\t\t\t\t\t\t\tdGhlIGFib3ZlIGNvcHly\n\t\t\t\t\t\t\taWdodCBub3RpY2UgYW5k\n\t\t\t\t\t\t\tIHRoaXMgcGVybWlzc2lv\n\t\t\t\t\t\t\tbiBub3RpY2UgYXBwZWFy\n\t\t\t\t\t\t\tIGluIGFsbCBjb3BpZXMu\n\t\t\t\t\t\t\tXApcClRIRSBTT0ZUV0FS\n\t\t\t\t\t\t\tRSBJUyBQUk9WSURFRCAi\n\t\t\t\t\t\t\tQVMgSVMiIEFORCBUSEUg\n\t\t\t\t\t\t\tQVVUSE9SIERJU0NMQUlN\n\t\t\t\t\t\t\tUyBBTEwgV0FSUkFOVElF\n\t\t\t\t\t\t\tUyBXSVRIIFJFR0FSRCBU\n\t\t\t\t\t\t\tTyBUSElTIFNPRlRXQVJF\n\t\t\t\t\t\t\tIElOQ0xVRElORyBBTEwg\n\t\t\t\t\t\t\tSU1QTElFRCBXQVJSQU5U\n\t\t\t\t\t\t\tSUVTIE9GIE1FUkNIQU5U\n\t\t\t\t\t\t\tQUJJTElUWSBBTkQgRklU\n\t\t\t\t\t\t\tTkVTUy4gSU4gTk8gRVZF\n\t\t\t\t\t\t\tTlQgU0hBTEwgVEhFIEFV\n\t\t\t\t\t\t\tVEhPUiBCRSBMSUFCTEUg\n\t\t\t\t\t\t\tRk9SIEFOWSBTUEVDSUFM\n\t\t\t\t\t\t\tLCBESVJFQ1QsIElORElS\n\t\t\t\t\t\t\tRUNULCBPUiBDT05TRVFV\n\t\t\t\t\t\t\tRU5USUFMIERBTUFHRVMg\n\t\t\t\t\t\t\tT1IgQU5ZIERBTUFHRVMg\n\t\t\t\t\t\t\tV0hBVFNPRVZFUiBSRVNV\n\t\t\t\t\t\t\tTFRJTkcgRlJPTSBMT1NT\n\t\t\t\t\t\t\tIE9GIFVTRSwgREFUQSBP\n\t\t\t\t\t\t\tUiBQUk9GSVRTLCBXSEVU\n\t\t\t\t\t\t\tSEVSIElOIEFOIEFDVElP\n\t\t\t\t\t\t\tTiBPRiBDT05UUkFDVCwg\n\t\t\t\t\t\t\tTkVHTElHRU5DRSBPUiBP\n\t\t\t\t\t\t\tVEhFUiBUT1JUSU9VUyBB\n\t\t\t\t\t\t\tQ1RJT04sIEFSSVNJTkcg\n\t\t\t\t\t\t\tT1VUIE9GIE9SIElOIENP\n\t\t\t\t\t\t\tTk5FQ1RJT04gV0lUSCBU\n\t\t\t\t\t\t\tSEUgVVNFIE9SIFBFUkZP\n\t\t\t\t\t\t\tUk1BTkNFIE9GIFRISVMg\n\t\t\t\t\t\t\tU09GVFdBUkUufQEAAAAj\n\t\t\t\t\t\t\tAAAAAQAAAAcAAABUWFQu\n\t\t\t\t\t\t\tcnRmEAAAAD248Vu2AQAA\n\t\t\t\t\t\t\tAAAAAAAAAAA=\n\t\t\t\t\t\t\t41E4D515-C065-4C24-9859-EA2479C52CC9\n\t\t\t\t\t\t\t",
			"ActionColor": "Yellow"
		},
		{
			"MacroActionType": "IfThenElse",
			"ActionName": "Assert parameter was supplied",
			"IsDisclosed": false,
			"ActionColor": "Magenta",
			"ElseActions": [],
			"TimeOutAbortsMacro": true,
			"Conditions": {
				"ConditionListMatch": "All",
				"ConditionList": [
					{
						"ConditionType": "Text",
						"TextValue": "",
						"Text": "%TriggerValue%",
						"TextConditionType": "IsEmpty"
					}
				]
			},
			"ElseActionListDisclosed": false,
			"ThenActions": [
				{
					"MacroActionType": "PromptForUserInput",
					"Title": "%ExecutingThisMacro%",
					"ActionName": "Notify the error",
					"Prompt": "Parameter required.",
					"IsDisclosed": false,
					"TimeOutAbortsMacro": true,
					"Buttons": [
						{
							"Button": "OK",
							"Cancel": true
						}
					],
					"Variables": []
				},
				{
					"MacroActionType": "Cancel",
					"IsDisclosed": false,
					"Action": "CancelThisMacro"
				}
			]
		},
		{
			"MacroActionType": "Group",
			"ActionName": "Copy the selected Macro as Image",
			"IsDisclosed": false,
			"TimeOutAbortsMacro": true,
			"ActionColor": "Aqua",
			"Actions": [
				{
					"MacroActionType": "SetVariableToCalculation",
					"UseFormat": false,
					"Variable": "kmfamOldClipboardSeed",
					"Text": "CLIPBOARDSEED()",
					"IsDisclosed": false
				},
				{
					"MacroActionType": "SelectMenuItem",
					"TargetingType": "Specific",
					"TargetApplication": {
						"BundleIdentifier": "com.stairways.keyboardmaestro.editor",
						"Name": "Keyboard Maestro",
						"NewFile": "/Applications/Keyboard Maestro.app"
					},
					"Menu": [
						"Edit",
						"Copy as",
						"Copy as Image"
					],
					"IsDisclosed": false
				},
				{
					"MacroActionType": "PauseUntil",
					"Conditions": {
						"ConditionListMatch": "All",
						"ConditionList": [
							{
								"ConditionType": "Calculation",
								"Text": "CLIPBOARDSEED() <> kmfamOldClipboardSeed"
							}
						]
					},
					"TimeOutAbortsMacro": true,
					"IsDisclosed": false
				}
			]
		},
		{
			"MacroActionType": "Group",
			"ActionName": "Adjust the image for Retina displays, if needed",
			"IsDisclosed": false,
			"TimeOutAbortsMacro": true,
			"ActionColor": "Green",
			"Actions": [
				{
					"MacroActionType": "GetImageSize",
					"Attribute": "DPI",
					"Variable": "kmfamImageDPI",
					"IsDisclosed": false
				},
				{
					"MacroActionType": "IfThenElse",
					"IsDisclosed": false,
					"TimeOutAbortsMacro": true,
					"ElseActions": [],
					"Conditions": {
						"ConditionListMatch": "All",
						"ConditionList": [
							{
								"ConditionType": "Calculation",
								"Text": "kmfamImageDPI > 72"
							}
						]
					},
					"ElseActionListDisclosed": false,
					"ThenActions": [
						{
							"MacroActionType": "GetImageSize",
							"ActionName": "Get Image Pixel Size of Clipboard into 'kmfamImageSize'",
							"Attribute": "PointSize",
							"Variable": "kmfamImageSize",
							"IsDisclosed": false
						},
						{
							"MacroActionType": "ResizeImage",
							"Height": "kmfamImageSize.y",
							"ResizeAction": "ScaleTo",
							"IsDisclosed": false,
							"Top": "100",
							"Left": "100",
							"Width": "kmfamImageSize.x"
						}
					]
				}
			]
		},
		{
			"MacroActionType": "Group",
			"ActionName": "Crop the image if needed",
			"IsDisclosed": false,
			"TimeOutAbortsMacro": true,
			"ActionColor": "Aqua",
			"Actions": [
				{
					"MacroActionType": "GetImageSize",
					"ActionName": "Get Image Pixel Size of Clipboard into 'kmfamImageSize'",
					"Attribute": "PixelSize",
					"Variable": "kmfamImageSize",
					"IsDisclosed": false
				},
				{
					"MacroActionType": "IfThenElse",
					"ActionName": "Crop image based on DPI",
					"IsDisclosed": false,
					"TimeOutAbortsMacro": true,
					"ElseActions": [
						{
							"MacroActionType": "ResizeImage",
							"ActionName": "Crop Image for normal displays, so we don't end up shrinking too small",
							"Height": "MIN(kmfamImageSize.height, 385)",
							"ResizeAction": "Crop",
							"IsDisclosed": false,
							"Top": "0",
							"Left": "0",
							"Width": "kmfamImageSize.width"
						}
					],
					"Conditions": {
						"ConditionListMatch": "All",
						"ConditionList": [
							{
								"ConditionType": "Calculation",
								"Text": "kmfamImageDPI > 72"
							}
						]
					},
					"ThenActions": [
						{
							"MacroActionType": "ResizeImage",
							"ActionName": "Crop Image for Retina displays, so we don't end up shrinking too small",
							"Height": "MIN(kmfamImageSize.height, 585)",
							"ResizeAction": "Crop",
							"IsDisclosed": false,
							"Top": "0",
							"Left": "0",
							"Width": "kmfamImageSize.width"
						}
					]
				}
			]
		},
		{
			"MacroActionType": "WriteFile",
			"ActionName": "Write the image from the Clipboard to the file specified in TriggerValue",
			"Append": false,
			"Format2": "JPEG",
			"Format": "JPEG",
			"ActionColor": "Green",
			"Destination": "%TriggerValue%",
			"Encoding": "UTF8",
			"IsDisclosed": false,
			"Source": "Clipboard"
		}
	]
}